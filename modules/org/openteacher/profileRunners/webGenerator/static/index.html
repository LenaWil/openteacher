<!DOCTYPE html>
<!--FIXME: include unsaved changes when printing? Or ask user?
Or be consistent and also exclude unsaved changes when saving?-->
<html>
	<head>
		<meta charset='UTF-8' />
		<title></title>
		<link rel='shortcut icon' href='img/logo' />
		<!-- libraries -->
		<script type='text/javascript' src='scr/library/pouchdb.js'></script>
		<script type='text/javascript' src='scr/library/pouchdb_ext.js'></script>
		<script type='text/javascript' src='scr/library/jquery.js'></script>
		<script type='text/javascript' src='scr/library/tmpl.js'></script>
		<!-- generated code -->
		<script type='text/javascript' src='scr/generated/logic.js'></script>
		<script type='text/javascript' src='scr/generated/config.js'></script>
		<script type='text/javascript' src='scr/generated/translations/index.js'></script>
		<!-- web-specific code -->
		<script type='text/javascript' src='scr/util.js'></script>
		<script type='text/javascript' src='scr/share.js'></script>
		<script type='text/javascript' src='scr/shares.js'></script>
		<script type='text/javascript' src='scr/learn-list.js'></script>
		<script type='text/javascript' src='scr/lists-overview.js'></script>
		<script type='text/javascript' src='scr/login.js'></script>
		<script type='text/javascript' src='scr/main.js'></script>
		<script type='text/javascript' src='scr/view-list.js'></script>
		<script type='text/x-tmpl' id='lists-template'>
			<tr class='{%= o.classes %}' data-id='{%= o.doc._id %}' data-rev='{%= o.doc._rev %}'>
				<td>
					<input type='checkbox' />
				</td>
				<td>
					<a href='#view-list'>{%= o.doc.title %}</a>
					<span class='links lighter'>
						<a class='view-link' href='#view-list'></a> |
						<a class='learn-link' href='#learn-list'></a>
					</span>
					<br />
					<span class='smaller lighter'>
						<span class='last-edited-label'></span>
						{%= new Date(o.doc.lastEdited).toLocaleString() %}
					</span>
				</td>
			</tr>
		</script>
		<script type='text/x-tmpl' id='share-list-template'>
			{% viewUrl = COUCHDB_HOST + "/" + o.dbName + "/_design/lists/_show/print/" + o.doc._id; %}
			<li class='{%= o.classes %}'>
				<a href='{%= viewUrl %}'>{%= o.doc.title %}</a>
				<span class='links lighter'>
					<a class='view-link' href='{%= viewUrl %}'></a> |
					<a data-id='{%= o.doc._id %}' class='take-over-link' href='#'></a>
				</span>
				<br />
				<span class='smaller lighter'>
					<span class='last-edited-label'></span>
					{%= new Date(o.doc.lastEdited).toLocaleString() %}
				</span>
			</li>
		</script>
		<script type='text/x-tmpl' id='list-template'>
			<tr data-id='{%= o.item.id %}'>
				<td>
					<div class='question-wrapper'>
						<input class='question-input' value='{%= o.compose(o.item.questions || []) %}' />
					</div>
				</td>
				<td>
					<div class='answer-wrapper'>
						<input class='answer-input' value='{%= o.compose(o.item.answers || []) %}' />
					</div>
				</td>
				<td>
					<a href='#' class='remove-item last-remove-item'>X</a>
				</td>
			</tr>
		</script>
		<script type='text/x-tmpl' id='tests-template'>
			<tr class='{%= o.classes %}'>
				<td>
					{% try { %}
							{%= new Date(o.test.results[0].active.start).toLocaleString() %}
					{% } catch (e) { %}
							<span class='unknown'></span>
					{% } %}
				</td>
				<td>{%= o.calculateNote(o.test) %}</td>
				<td>
					<input type='checkbox' class='finished-checkbox' {%= o.test.finished ? "checked='checked'": "" %} />
				</td>
			</tr>
		</script>
		<script type='text/x-tmpl' id='link-template'>
			<li>
				<a data-ext='{%= o.ext %}' href='#'>{%= o.title + o.ext %}</a>
			</li>
		</script>
		<link rel='stylesheet' type='text/css' href='css/style.css' />
		<script type='text/x-tmpl' id='share-template'>
			<li>
				<a href='#'>{%= o.key %}</a>
			</li>
		</script>
	</head>
	<body>
		<div id='header'>
			<div id='header-inner'>
				<img id='logo' src='img/logo' />
				<div class='smaller' id='session-box'>
					<a href='#' id='deregister-link'></a> |
					<a href='#' id='logout-link'></a>
				</div>
				<h1 id='header-title'></h1>
			</div>
		</div>
		<div id='content'>
			<div id='login-page'>
				<div id='login-part'>
					<h2 class='subheader'></h2>
					<p id='register-success'></p>
					<p id='register-failure'></p>
					<p>
						<a href='#' id='register-link'></a>
					</p>
					<form id='login-form' action='#'>
						<table>
							<tbody>
								<tr>
									<td id='username-label'></td>
									<td>
										<input id='username' value='test' type='text' />
									</td>
								</tr>
								<tr>
									<td id='password-label'></td>
									<td>
										<input id='password' value='hsdfjkh3$4' type='password' />
									</td>
								</tr>
								<tr>
									<td colspan='2'>
										<input id='login-button' type='submit' />
									</td>
								</tr>
							</tbody>
						</table>
					</form>
				</div>
				<iframe id='register-iframe'></iframe>
				<div id='share-part'>
					<a id='shares-link' href='#'><h2 class='subheader'></h2></a>
				</div>
			</div>
			<div id='shares-page'>
				<h2 class='subheader'></h2>
				<form id='share-owner-form' action='#'>
					<label for='share-owner' id='share-owner-label'></label>
					<input id='share-owner' />
					<input id='find-shares' type='submit' />
				</form>
				<p id='share-error'></p>
				<ul id='share-links'></ul>
			</div>
			<div id='share-page'>
				<a class='links' href='#' id='share-feed-link'>
					<img src='img/feed-icon.png' />
				</a>
				<h2 class='subheader'></h2>
				<ul id='share-lists'>
				</ul>
				<button id='back-to-shares'></button>
			</div>
			<div id='lists-page'>
				<h2 class='subheader'></h2>
				<div id='loading-box'>
					<img src='img/loading.gif' />
				</div>
				<table id='lists'>
					<tbody>
					</tbody>
				</table>
				<button id='remove-selected'></button>
				<button id='new-list'></button>
				<button id='load-list-from-computer'></button>
				<div id='upload-part'>
					<div class='part-inner'>
						<form id='upload-form' action='#'>
							<p id='upload-explanation'></p>
							<p id='upload-exts' class='smaller'></p>
							<p id='load-failure'></p>
							<input id='file-box' multiple='multiple' type='file' /><br />
							<input id='do-upload' type='submit' />
							<button id='cancel-upload'></button><br />
						</form>
					</div>
				</div>
			</div>
			<div id='view-page'>
				<h2 class='subheader'></h2>
				<div id='list-part'>
					<table id='list-metadata'>
						<tbody>
							<tr>
								<td id='title-label'></td>
								<td>
									<input id='title' />
								</td>
							</tr>
							<tr>
								<td id='shares-label'></td>
								<td><input id='shares' /></td>
							</tr>
							<tr>
								<td colspan='2' class='smaller lighter'>
									<span id='shares-info-label'></span>
									<span id='shares-info'></span>
								</td>
							</tr>
						</tbody>
					</table>
					<br />
					<table id='list'>
						<thead>
							<tr>
								<th id='list-questions-header'></th>
								<th id='list-answers-header'></th>
							</tr>
						</thead>
						<tbody id='list-languages'>
							<tr>
								<td>
									<div class='question-wrapper'>
										<input class='question-input' id='question-lang'>
									</div>
								</td>
								<td>
									<div class='answer-wrapper'>
										<input class='answer-input' id='answer-lang'>
									</div>
								</td>
							</tr>
						</tbody>
						<tbody id='list-items'></tbody>
					</table>
				</div>
				<div id='tests-part'>
					<h2 class='subheader'></h2>
					<table id='tests'>
						<thead>
							<tr>
								<th id='tests-date-header'></th>
								<th id='tests-note-header'></th>
								<th id='tests-completed-header'></th>
							</tr>
						</thead>
						<tbody>
						</tbody>
					</table>
				</div>
				<p id='save-success'></p>
				<p id='save-forbidden'></p>
				<p id='save-conflict'></p>
				<button id='back-from-list-page'></button>
				<button id='save-list'></button>
				<button id='print-list'></button>
				<button id='download-list'></button>
				<button id='teach-list'></button>

				<div id='download-part'>
					<div class='part-inner'>
						<p id='download-explanation'></p>
						<ul id='download-links'></ul>
						<button id='close-download'></button><br />
					</div>
				</div>
				<iframe id='print-frame' name='print-frame'></iframe>
				<iframe id='download-frame' name='download-frame'></iframe>
			</div>
			<div id='learn-page'>
				<p>
					<span id='question-label-label'></span><br />
					<span id='question-label'></span><br />
					<span id='correction-label'></span>
				</p>
				<form action='#' id='learn-form'>
					<input id='learn-answer-input' /><br />
					<input type='submit' id='check-button' /><br />
					<input type='button' id='skip-button' />
					<input type='button' id='correct-anyway-button' />
				</form>
				<br />
				<button id='back-from-learn-page'></button>
			</div>
		</div>
		<div id='footer'>
			<div id='footer-inner'>
				<a href='COPYING.txt' class='smaller lighter' id='license-and-source-link'></a>
			</div>
		</div>
	</body>
</html>
